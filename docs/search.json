[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Restaurants in NYC",
    "section": "",
    "text": "1 Introduction",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Setup and Data loading\nThis section installs required packages and loads the dataset directly from the NYC Open Data API.\nCode\n# ==============================================================================\n# SETUP & DEPENDENCIES \n# ==============================================================================\npackages &lt;- c(\n  \"tidyverse\",\n  \"ggdensity\",\n  \"lubridate\",\n  \"dplyr\",\n  \"purrr\",\n  \"sf\",\n  \"ggplot2\"\n  )\n\nnew_packages &lt;- packages[!(packages %in% installed.packages()[, \"Package\"])]\n\nif (length(new_packages) &gt; 0) {\n  install.packages(new_packages)\n}\n\ninvisible(lapply(packages, library, character.only = TRUE))\n\n# ==============================================================================\n# VISUALIZATION THEME \n# ==============================================================================\ntheme_nyc &lt;- function() {\n  theme_minimal(base_family = \"sans\") +\n    theme(\n      # Typography: Bold \"Newspaper Headline\" style or Subway Signage\n      plot.title = element_text(face = \"bold\", size = 18, color = \"#121212\", margin = margin(b = 10)),\n      plot.subtitle = element_text(size = 12, color = \"#444444\", margin = margin(b = 15)),\n      plot.caption = element_text(size = 9, color = \"#666666\", face = \"italic\"),\n      \n      # Axes: Strong and dark for structure\n      axis.title = element_text(face = \"bold\", size = 11, color = \"#121212\"),\n      axis.text = element_text(size = 10, color = \"#222222\"),\n      \n      # Grid: \"The NYC Grid\" (clean, thin major lines)\n      panel.grid.major = element_line(color = \"#e0e0e0\", linewidth = 0.5),\n      panel.grid.minor = element_blank(), # Remove minor grid lines to reduce visual noise\n      \n      # Legend and Layout\n      legend.position = \"top\", # Position top for immediate readability\n      legend.title = element_text(face = \"bold\", size = 10),\n      legend.text = element_text(size = 10),\n      \n      # Facet Strips (Headers for multi-panel plots)\n      strip.text = element_text(face = \"bold\", size = 11, hjust = 0),\n      strip.background = element_rect(fill = \"transparent\", color = NA)\n    )\n}\n\n# ==============================================================================\n# DATA INGESTION (API)\n# ==============================================================================\n\n# Define the remote URL to ensure reproducibility\nurl_dati &lt;- \"https://data.cityofnewyork.us/api/views/43nn-pn8j/rows.csv?accessType=DOWNLOAD\"\n\n# Load the dataset directly from the web\ndf &lt;- read_csv(url_dati,\n    # Enforce specific column types to handle parsing issues upfront\n    col_types = cols(\n    .default = col_character(),\n    CAMIS = col_double(),\n    ZIPCODE = col_character(),\n    SCORE = col_double(),\n    Latitude = col_double(),\n    Longitude = col_double(),\n    `Community Board` = col_double(),\n    BIN = col_double(),\n    BBL = col_double()\n  ),\n  show_col_types = FALSE\n ) |&gt;\n  # Parse date columns from string (Month-Day-Year) to Date objects\n  mutate(`INSPECTION DATE` = mdy(`INSPECTION DATE`),\n         `GRADE DATE` = mdy(`GRADE DATE`),\n         `RECORD DATE` = mdy(`RECORD DATE`))",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.3 Missing value analysis",
    "text": "2.3 Missing value analysis\n\n2.3.0.1 DOHMH New York City Restaurant Inspection Results**\n\n\nCode\n# Calculate percentage of missing values per column\nmissing_summary &lt;- df |&gt;\n  summarise(across(everything(), ~ mean(is.na(.)) * 100)) |&gt;\n  pivot_longer(everything(), names_to = \"column\", values_to = \"percent_missing\") |&gt;\n  filter(percent_missing &gt; 0.1) |&gt; # Filter only columns with missing values\n  arrange(desc(percent_missing))\n\n# Bar chart\nggplot(missing_summary, aes(x = reorder(column, percent_missing), y = percent_missing)) +\n  geom_col(fill = \"steelblue\") +\n  coord_flip() +\n  labs(title = \"Percentage of Missing Values by Column\",\n       x = \"Variable\", \n       y = \"% Missing\") +\n  theme_nyc()\n\n\n\n\n\n\n\n\n\nExpanding on the column-wise analysis, the heatmap reveals the operational workflow behind the missing values. While Pattern 1 represents finalized inspections (complete data), Pattern 2 is nearly as frequent and accounts for the large gap between missing Scores and missing Grades. Additionally, Pattern 3 (missing both Score and Grade) likely isolates administrative or non-graded interactions, distinct from standard sanitary inspections\n\n\nCode\n# 1. Create patterns\nmissing_patterns &lt;- df |&gt;\n  select(GRADE, `GRADE DATE`, SCORE, `VIOLATION CODE`, `ACTION`) |&gt;\n  mutate(across(everything(), is.na)) |&gt;\n  group_by(across(everything())) |&gt;\n  summarise(count = n(), .groups = \"drop\") |&gt;\n  arrange(desc(count)) |&gt;\n  ungroup() |&gt;\n  mutate(pattern_id = row_number()) |&gt;\n  pivot_longer(cols = -c(count, pattern_id), names_to = \"variable\", values_to = \"is_missing\")\n\n# 2. Prepare data for plotting (Top 10 only)\ntop_patterns &lt;- missing_patterns |&gt;\n  filter(pattern_id &lt;= 10) |&gt;\n  # Create a descriptive Y-axis label including the count\n  mutate(row_label = paste0(\"Pattern \", pattern_id, \" (n = \", count, \")\"))\n\n# 3. Visualization\nggplot(top_patterns, aes(x = variable, y = fct_rev(fct_inorder(row_label)), fill = is_missing)) +\n  geom_tile(color = \"white\") +\n  \n  # Manual colors: Orange for Missing, Grey for Present\n  scale_fill_manual(values = c(\"TRUE\" = \"tomato\", \"FALSE\" = \"grey80\"), \n                    labels = c(\"Present\", \"Missing\")) +\n  \n  # English labels\n  labs(title = \"Common Missing Value Patterns\",\n       subtitle = \"Which columns tend to be missing together? (Top 10 Patterns)\",\n       x = \"Variable\", \n       y = \"Pattern Frequency\", \n       fill = \"Is Missing?\") +\n  \n  theme_nyc()",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Results",
    "section": "",
    "text": "3.1 Setup and Data loading\nThis section installs required packages and loads the dataset directly from the NYC Open Data API.\nCode\n# ==============================================================================\n# SETUP & DEPENDENCIES \n# ==============================================================================\npackages &lt;- c(\n  \"tidyverse\",\n  \"ggdensity\",\n  \"lubridate\",\n  \"dplyr\",\n  \"purrr\",\n  \"sf\",\n  \"ggplot2\"\n  )\n\nnew_packages &lt;- packages[!(packages %in% installed.packages()[, \"Package\"])]\n\nif (length(new_packages) &gt; 0) {\n  install.packages(new_packages)\n}\n\ninvisible(lapply(packages, library, character.only = TRUE))\n\n# ==============================================================================\n# VISUALIZATION THEME \n# ==============================================================================\ntheme_nyc &lt;- function() {\n  theme_minimal(base_family = \"sans\") +\n    theme(\n      # Typography: Bold \"Newspaper Headline\" style or Subway Signage\n      plot.title = element_text(face = \"bold\", size = 18, color = \"#121212\", margin = margin(b = 10)),\n      plot.subtitle = element_text(size = 12, color = \"#444444\", margin = margin(b = 15)),\n      plot.caption = element_text(size = 9, color = \"#666666\", face = \"italic\"),\n      \n      # Axes: Strong and dark for structure\n      axis.title = element_text(face = \"bold\", size = 11, color = \"#121212\"),\n      axis.text = element_text(size = 10, color = \"#222222\"),\n      \n      # Grid: \"The NYC Grid\" (clean, thin major lines)\n      panel.grid.major = element_line(color = \"#e0e0e0\", linewidth = 0.5),\n      panel.grid.minor = element_blank(), # Remove minor grid lines to reduce visual noise\n      \n      # Legend and Layout\n      legend.position = \"top\", # Position top for immediate readability\n      legend.title = element_text(face = \"bold\", size = 10),\n      legend.text = element_text(size = 10),\n      \n      # Facet Strips (Headers for multi-panel plots)\n      strip.text = element_text(face = \"bold\", size = 11, hjust = 0),\n      strip.background = element_rect(fill = \"transparent\", color = NA)\n    )\n}\n\n# ==============================================================================\n# DATA INGESTION (API)\n# ==============================================================================\n\n# Define the remote URL to ensure reproducibility\nurl_dati &lt;- \"https://data.cityofnewyork.us/api/views/43nn-pn8j/rows.csv?accessType=DOWNLOAD\"\n\n# Load the dataset directly from the web\ndf &lt;- read_csv(url_dati,\n    # Enforce specific column types to handle parsing issues upfront\n    col_types = cols(\n    .default = col_character(),\n    CAMIS = col_double(),\n    ZIPCODE = col_character(),\n    SCORE = col_double(),\n    Latitude = col_double(),\n    Longitude = col_double(),\n    `Community Board` = col_double(),\n    BIN = col_double(),\n    BBL = col_double()\n  ),\n  show_col_types = FALSE\n ) |&gt;\n  # Parse date columns from string (Month-Day-Year) to Date objects\n  mutate(`INSPECTION DATE` = mdy(`INSPECTION DATE`),\n         `GRADE DATE` = mdy(`GRADE DATE`),\n         `RECORD DATE` = mdy(`RECORD DATE`))\n\n# ==============================================================================\n# DATA AGGREGATION AT RESTAURANT LEVEL \n# ==============================================================================\n\n# Helper functions to handle NAs safely\nlast_non_null &lt;- function(x) {\n  x &lt;- x[!is.na(x)]\n  if (length(x) == 0) return(NA)\n  tail(x, 1)\n}\n\nsafe_mean &lt;- function(x) {\n  x &lt;- x[!is.na(x)]\n  if (length(x) == 0) return(NA_real_)\n  mean(x)\n}\n\nrestaurants &lt;- df |&gt;\n  # Remove dummy dates (1900) and focus on relevant recent data (post-2015)\n  filter(`INSPECTION DATE` &gt;= ymd(\"2015-01-01\")) |&gt; \n  \n  arrange(`INSPECTION DATE`) |&gt;\n  group_by(CAMIS) |&gt;\n  summarise(\n    DBA      = first(na.omit(DBA)),\n    BORO     = first(na.omit(BORO)),\n    BUILDING = first(BUILDING),\n    STREET   = first(STREET),\n    ZIPCODE  = first(ZIPCODE),\n    PHONE    = first(PHONE),\n    CUISINE_DESCRIPTION = first(`CUISINE DESCRIPTION`),\n    \n    # If the first value is NA, the mean retrieves the location across inspections\n    Latitude  = mean(Latitude, na.rm = TRUE), \n    Longitude = mean(Longitude, na.rm = TRUE),\n\n    n_inspections    = n_distinct(`INSPECTION DATE`, na.rm = TRUE),\n    first_inspection = min(`INSPECTION DATE`, na.rm = TRUE),\n    last_inspection  = max(`INSPECTION DATE`, na.rm = TRUE),\n\n    mean_score = safe_mean(SCORE),\n    # Mean score provides a good summary of overall hygiene performance\n    \n    last_grade = last_non_null(GRADE),\n\n    # Create a list of all unique violations ever received by the restaurant\n    violations = list(unique(na.omit(`VIOLATION DESCRIPTION`))),\n    .groups = \"drop\"\n  )\n\n# ==============================================================================\n# CUISINE CATEGORIZATION MAPPING \n# ==============================================================================\n\nmapping &lt;- c(\n  # --- AMERICAN (Include ora Seafood, Jewish/Kosher e varianti regionali) ---\n  \"American\"                       = \"American\",\n  \"New American\"                   = \"American\",\n  \"Chicken\"                        = \"American\",\n  \"Hamburgers\"                     = \"American\",\n  \"Steakhouse\"                     = \"American\",\n  \"Barbecue\"                       = \"American\",\n  \"Hotdogs\"                        = \"American\",\n  \"Hotdogs/Pretzels\"               = \"American\",\n  \"Soul Food\"                      = \"American\",\n  \"Continental\"                    = \"American\",\n  \"Californian\"                    = \"American\",\n  \"Southwestern\"                   = \"American\",\n  \"Cajun\"                          = \"American\",\n  \"Creole\"                         = \"American\",\n  \"Creole/Cajun\"                   = \"American\",\n  \"Hawaiian\"                       = \"American\", # Poke è spesso fast casual\n  \"Seafood\"                        = \"American\", # Unito ad American\n  \"Jewish/Kosher\"                  = \"American\", # Unito ad American (stile Deli)\n\n  # --- CAFE, DELI, BAKERY & DESSERTS (Include Sandwiches e Salads) ---\n  \"Coffee/Tea\"                     = \"Cafe/Deli/Bakery\",\n  \"Bakery Products/Desserts\"       = \"Cafe/Deli/Bakery\",\n  \"Donuts\"                         = \"Cafe/Deli/Bakery\",\n  \"Frozen Desserts\"                = \"Cafe/Deli/Bakery\",\n  \"Pancakes/Waffles\"               = \"Cafe/Deli/Bakery\",\n  \"Nuts/Confectionary\"             = \"Cafe/Deli/Bakery\",\n  \"Fruits/Vegetables\"              = \"Cafe/Deli/Bakery\",\n  # Spostati qui come richiesto:\n  \"Sandwiches\"                     = \"Cafe/Deli/Bakery\",\n  \"Sandwiches/Salads/Mixed Buffet\" = \"Cafe/Deli/Bakery\",\n  \"Salads\"                         = \"Cafe/Deli/Bakery\",\n  \"Soups/Salads/Sandwiches\"        = \"Cafe/Deli/Bakery\",\n  \"Soups\"                          = \"Cafe/Deli/Bakery\",\n  \"Juice, Smoothies, Fruit Salads\" = \"Cafe/Deli/Bakery\",\n  \"Bagels/Pretzels\"                = \"Cafe/Deli/Bakery\",\n  \"Bottled Beverages\"              = \"Cafe/Deli/Bakery\",\n\n  # --- ASIAN ---\n  \"Chinese\"                        = \"Asian\",\n  \"Japanese\"                       = \"Asian\",\n  \"Asian/Asian Fusion\"             = \"Asian\",\n  \"Korean\"                         = \"Asian\",\n  \"Thai\"                           = \"Asian\",\n  \"Southeast Asian\"                = \"Asian\",\n  \"Bangladeshi\"                    = \"Asian\",\n  \"Filipino\"                       = \"Asian\",\n  \"Pakistani\"                      = \"Asian\",\n  \"Chinese/Japanese\"               = \"Asian\",\n  \"Chinese/Cuban\"                  = \"Asian\",\n  \"Indonesian\"                     = \"Asian\",\n  \"Afghan\"                         = \"Asian\",\n  \n  # --- LATIN AMERICAN ---\n  \"Mexican\"                        = \"Latin American\",\n  \"Latin American\"                 = \"Latin American\",\n  \"Caribbean\"                      = \"Latin American\",\n  \"Tex-Mex\"                        = \"Latin American\",\n  \"Peruvian\"                       = \"Latin American\",\n  \"Brazilian\"                      = \"Latin American\",\n  \"Chilean\"                        = \"Latin American\",\n  \"Chimichurri\"                    = \"Latin American\",\n  \n  # --- ITALIAN (Include Pizza) ---\n  \"Pizza\"                          = \"Italian\",\n  \"Italian\"                        = \"Italian\",\n  \n  # --- EUROPEAN (Spagnola, Est Europa, ecc.) ---\n  \"Spanish\"                        = \"European\",\n  \"Irish\"                          = \"European\",\n  \"Eastern European\"               = \"European\",\n  \"Russian\"                        = \"European\",\n  \"Polish\"                         = \"European\",\n  \"German\"                         = \"European\",\n  \"English\"                        = \"European\",\n  \"Tapas\"                          = \"European\",\n  \"Portuguese\"                     = \"European\",\n  \"Czech\"                          = \"European\",\n  \"Scandinavian\"                   = \"European\",\n  \"Basque\"                         = \"European\",\n  \"Armenian\"                       = \"European\",\n\n  # --- FRENCH ---\n  \"French\"                         = \"French\",\n  \"New French\"                     = \"French\",\n  \"Haute Cuisine\"                  = \"French\",\n\n  # --- MEDITERRANEAN / MIDDLE EASTERN ---\n  \"Mediterranean\"                  = \"Mediterranean/Middle Eastern\",\n  \"Middle Eastern\"                 = \"Mediterranean/Middle Eastern\",\n  \"Greek\"                          = \"Mediterranean/Middle Eastern\",\n  \"Turkish\"                        = \"Mediterranean/Middle Eastern\",\n  \"Falafel\"                        = \"Mediterranean/Middle Eastern\",\n  \"Egyptian\"                       = \"Mediterranean/Middle Eastern\",\n  \"Moroccan\"                       = \"Mediterranean/Middle Eastern\",\n  \"Lebanese\"                       = \"Mediterranean/Middle Eastern\",\n  \"Iranian\"                        = \"Mediterranean/Middle Eastern\",\n\n  # --- INDIAN ---\n  \"Indian\"                         = \"Indian\",\n\n  # --- OTHER ---\n  \"Other\"                          = \"Other\",\n  \"Fusion\"                         = \"Other\",\n  \"Australian\"                     = \"Other\",\n  \"Polynesian\"                     = \"Other\",\n  \"Not Listed/Not Applicable\"      = \"Other\",\n  \"African\"                        = \"Other\",\n  \"Ethiopian\"                      = \"Other\"\n)\n\n# mapping\nrestaurants &lt;- restaurants |&gt;\n  mutate(\n    cuisine_group = mapping[CUISINE_DESCRIPTION],\n    cuisine_group = ifelse(is.na(cuisine_group), \"Other\", cuisine_group)\n  )",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#hygiene-score-analysis",
    "href": "results.html#hygiene-score-analysis",
    "title": "3  Results",
    "section": "3.3 Hygiene Score Analysis",
    "text": "3.3 Hygiene Score Analysis\n\n\nCode\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# Filter data for the plot\nscore_analysis &lt;- restaurants %&gt;%\n  # Remove extreme outliers (scores &gt; 60 are rare) for better readability\n  filter(mean_score &lt; 60)\n\n# Combined Boxplot + Violin Plot\nggplot(score_analysis, aes(x = reorder(cuisine_group, mean_score, FUN = median), y = mean_score)) +\n  \n  # Violin plot (bottom layer): Shows the shape/density of the distribution\n  geom_violin(fill = \"grey90\", color = NA, alpha = 0.5) +\n  \n  # Boxplot (top layer): Shows median and quartiles\n  geom_boxplot(width = 0.2, fill = \"steelblue\", outlier.size = 0.5, outlier.alpha = 0.3) +\n  \n  # Dashed red line at 13 (Threshold for Grade A)\n  geom_hline(yintercept = 13, linetype = \"dashed\", color = \"red\", linewidth = 0.8) +\n  annotate(\"text\", x = 1, y = 14.5, label = \"Grade A Limit (13)\", \n           color = \"red\", size = 3, hjust = 0) +\n  \n  # Flip coordinates for readable labels\n  coord_flip() + \n  labs(title = \"Hygiene Scores by Cuisine Type\",\n       subtitle = \"Lower score indicates better hygiene performance\",\n       x = \"Cuisine Group\",\n       y = \"Average Inspection Score\") +\n  theme_minimal() +\n  theme(\n    axis.text.y = element_text(face = \"bold\", size = 10),\n    plot.title = element_text(face = \"bold\")\n  )\n\n\n\n\n\n\n\n\n\nWe utilized a combined violin and boxplot to analyze the distribution of hygiene scores across cuisine groups. The red dashed line at a score of 13 marks the critical threshold for an “A” grade; the plot reveals that while the median scores for most cuisines fall within the “A” range, certain groups (such as Latin American and Asian cuisines) exhibit a wider distribution with a longer tail of higher scores, suggesting higher variance in compliance or inspection complexity.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "data.html#restaurant-level-aggregation",
    "href": "data.html#restaurant-level-aggregation",
    "title": "2  Data",
    "section": "2.3 Restaurant-level aggregation",
    "text": "2.3 Restaurant-level aggregation\n\n\nCode\n# Helper functions to handle NAs safely\nlast_non_null &lt;- function(x) {\n  x &lt;- x[!is.na(x)]\n  if (length(x) == 0) return(NA)\n  tail(x, 1)\n}\n\nsafe_mean &lt;- function(x) {\n  x &lt;- x[!is.na(x)]\n  if (length(x) == 0) return(NA_real_)\n  mean(x)\n}\n\n# --- DATA TRANSFORMATION ---\nrestaurants &lt;- df %&gt;%\n  # 1. TIME FILTER BEFORE GROUPING\n  # Remove dummy dates (1900) and focus on relevant recent data (post-2015)\n  filter(`INSPECTION DATE` &gt;= ymd(\"2015-01-01\")) %&gt;% \n  \n  arrange(`INSPECTION DATE`) %&gt;%\n  group_by(CAMIS) %&gt;%\n  summarise(\n    DBA      = first(na.omit(DBA)),    # Takes the first non-null name\n    BORO     = first(na.omit(BORO)),\n    BUILDING = first(BUILDING),\n    STREET   = first(STREET),\n    ZIPCODE  = first(ZIPCODE),\n    PHONE    = first(PHONE),\n    CUISINE_DESCRIPTION = first(`CUISINE DESCRIPTION`),\n    \n    # 2. ROBUST COORDINATES\n    # If the first value is NA, the mean retrieves the location across inspections\n    Latitude  = mean(Latitude, na.rm = TRUE), \n    Longitude = mean(Longitude, na.rm = TRUE),\n\n    n_inspections    = n_distinct(`INSPECTION DATE`, na.rm = TRUE),\n    first_inspection = min(`INSPECTION DATE`, na.rm = TRUE),\n    last_inspection  = max(`INSPECTION DATE`, na.rm = TRUE),\n\n    mean_score = safe_mean(SCORE),\n    # Mean score provides a good summary of overall hygiene performance\n    \n    last_grade = last_non_null(GRADE),\n\n    # Create a list of all unique violations ever received by the restaurant\n    violations = list(unique(na.omit(`VIOLATION DESCRIPTION`))),\n    .groups = \"drop\"\n  )\n\ncat(\"Final row count (Restaurants):\", nrow(restaurants), \"\\n\")\n\n\nFinal row count (Restaurants): 26592 \n\n\nCode\n# View the resulting dataframe\nrestaurants\n\n\n# A tibble: 26,592 × 16\n      CAMIS DBA                         BORO      BUILDING STREET            \n      &lt;dbl&gt; &lt;chr&gt;                       &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;             \n 1 30075445 MORRIS PARK BAKE SHOP       Bronx     1007     MORRIS PARK AVENUE\n 2 30191841 D.J. REYNOLDS               Manhattan 351      WEST   57 STREET  \n 3 40356018 RIVIERA CATERERS            Brooklyn  2780     STILLWELL AVENUE  \n 4 40356483 WILKEN'S FINE FOOD          Brooklyn  7114     AVENUE U          \n 5 40356731 TASTE THE TROPICS ICE CREAM Brooklyn  1839     NOSTRAND AVENUE   \n 6 40357217 ASIA PLAZA CAFÉ             Bronx     2300     SOUTHERN BOULEVARD\n 7 40359480 1 EAST 66TH STREET KITCHEN  Manhattan 1        EAST   66 STREET  \n 8 40359705 NATHAN'S FAMOUS             Brooklyn  1310     SURF AVENUE       \n 9 40360045 SEUDA FOODS                 Brooklyn  705      KINGS HIGHWAY     \n10 40361618 SAL'S DELI                  Queens    12908    20 AVENUE         \n   ZIPCODE PHONE      CUISINE_DESCRIPTION      Latitude Longitude n_inspections\n   &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;                       &lt;dbl&gt;     &lt;dbl&gt;         &lt;int&gt;\n 1 10462   7188924968 Bakery Products/Desserts     40.8     -73.9             5\n 2 10019   2122452912 Irish                        40.8     -74.0             3\n 3 11224   7183723031 American                     40.6     -74.0             2\n 4 11234   7184443838 Sandwiches                   40.6     -73.9             6\n 5 11226   7188560821 Frozen Desserts              40.6     -73.9             3\n 6 10460   7187411426 American                     40.9     -73.9             2\n 7 10065   2128793900 American                     40.8     -74.0             2\n 8 11224   7183332202 Hotdogs                      40.6     -74.0             3\n 9 11223   7183751500 Jewish/Kosher                40.6     -74.0             3\n10 11356   7186619498 Sandwiches                   40.8     -73.8             3\n   first_inspection last_inspection mean_score last_grade violations\n   &lt;date&gt;           &lt;date&gt;               &lt;dbl&gt; &lt;chr&gt;      &lt;list&gt;    \n 1 2023-01-31       2024-11-08           19.7  A          &lt;chr [13]&gt;\n 2 2023-04-23       2025-02-20           18.4  A          &lt;chr [8]&gt; \n 3 2024-04-16       2025-09-17            6.67 A          &lt;chr [3]&gt; \n 4 2022-01-24       2025-01-06           23.6  A          &lt;chr [14]&gt;\n 5 2023-01-17       2025-04-30           11.3  A          &lt;chr [7]&gt; \n 6 2024-05-21       2025-10-20           12    A          &lt;chr [4]&gt; \n 7 2019-10-01       2022-05-03            9    A          &lt;chr [3]&gt; \n 8 2023-04-26       2025-10-08           40.6  A          &lt;chr [12]&gt;\n 9 2022-01-05       2024-07-29           10.8  A          &lt;chr [7]&gt; \n10 2022-02-01       2024-09-16           11.6  A          &lt;chr [7]&gt; \n# ℹ 26,582 more rows\n\n\nThe original dataset is granular, containing multiple rows for every single inspection and violation. To perform a restaurant-level analysis—such as mapping cuisine locations or comparing hygiene standards across different culinary traditions—we aggregate the data to create a unique entry for each establishment, summarizing its history into single metrics like mean_score and average coordinates.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#cuisine-grouping",
    "href": "data.html#cuisine-grouping",
    "title": "2  Data",
    "section": "2.4 Cuisine Grouping",
    "text": "2.4 Cuisine Grouping\n\n\nCode\nmapping &lt;- c(\n  # --- AMERICAN (Include ora Seafood, Jewish/Kosher e varianti regionali) ---\n  \"American\"                       = \"American\",\n  \"New American\"                   = \"American\",\n  \"Chicken\"                        = \"American\",\n  \"Hamburgers\"                     = \"American\",\n  \"Steakhouse\"                     = \"American\",\n  \"Barbecue\"                       = \"American\",\n  \"Hotdogs\"                        = \"American\",\n  \"Hotdogs/Pretzels\"               = \"American\",\n  \"Soul Food\"                      = \"American\",\n  \"Continental\"                    = \"American\",\n  \"Californian\"                    = \"American\",\n  \"Southwestern\"                   = \"American\",\n  \"Cajun\"                          = \"American\",\n  \"Creole\"                         = \"American\",\n  \"Creole/Cajun\"                   = \"American\",\n  \"Hawaiian\"                       = \"American\", # Poke è spesso fast casual\n  \n  # MERGE RICHIESTI:\n  \"Seafood\"                        = \"American\", # Unito ad American\n  \"Jewish/Kosher\"                  = \"American\", # Unito ad American (stile Deli)\n\n  # --- CAFE, DELI, BAKERY & DESSERTS (Include Sandwiches e Salads) ---\n  \"Coffee/Tea\"                     = \"Cafe/Deli/Bakery\",\n  \"Bakery Products/Desserts\"       = \"Cafe/Deli/Bakery\",\n  \"Donuts\"                         = \"Cafe/Deli/Bakery\",\n  \"Frozen Desserts\"                = \"Cafe/Deli/Bakery\",\n  \"Pancakes/Waffles\"               = \"Cafe/Deli/Bakery\",\n  \"Nuts/Confectionary\"             = \"Cafe/Deli/Bakery\",\n  \"Fruits/Vegetables\"              = \"Cafe/Deli/Bakery\",\n  # Spostati qui come richiesto:\n  \"Sandwiches\"                     = \"Cafe/Deli/Bakery\",\n  \"Sandwiches/Salads/Mixed Buffet\" = \"Cafe/Deli/Bakery\",\n  \"Salads\"                         = \"Cafe/Deli/Bakery\",\n  \"Soups/Salads/Sandwiches\"        = \"Cafe/Deli/Bakery\",\n  \"Soups\"                          = \"Cafe/Deli/Bakery\",\n  \"Juice, Smoothies, Fruit Salads\" = \"Cafe/Deli/Bakery\",\n  \"Bagels/Pretzels\"                = \"Cafe/Deli/Bakery\",\n  \"Bottled Beverages\"              = \"Cafe/Deli/Bakery\",\n\n  # --- ASIAN ---\n  \"Chinese\"                        = \"Asian\",\n  \"Japanese\"                       = \"Asian\",\n  \"Asian/Asian Fusion\"             = \"Asian\",\n  \"Korean\"                         = \"Asian\",\n  \"Thai\"                           = \"Asian\",\n  \"Southeast Asian\"                = \"Asian\",\n  \"Bangladeshi\"                    = \"Asian\",\n  \"Filipino\"                       = \"Asian\",\n  \"Pakistani\"                      = \"Asian\",\n  \"Chinese/Japanese\"               = \"Asian\",\n  \"Chinese/Cuban\"                  = \"Asian\",\n  \"Indonesian\"                     = \"Asian\",\n  \"Afghan\"                         = \"Asian\",\n  \n  # --- LATIN AMERICAN ---\n  \"Mexican\"                        = \"Latin American\",\n  \"Latin American\"                 = \"Latin American\",\n  \"Caribbean\"                      = \"Latin American\",\n  \"Tex-Mex\"                        = \"Latin American\",\n  \"Peruvian\"                       = \"Latin American\",\n  \"Brazilian\"                      = \"Latin American\",\n  \"Chilean\"                        = \"Latin American\",\n  \"Chimichurri\"                    = \"Latin American\",\n  \n  # --- ITALIAN (Include Pizza) ---\n  \"Pizza\"                          = \"Italian\",\n  \"Italian\"                        = \"Italian\",\n  \n  # --- EUROPEAN (Spagnola, Est Europa, ecc.) ---\n  \"Spanish\"                        = \"European\",\n  \"Irish\"                          = \"European\",\n  \"Eastern European\"               = \"European\",\n  \"Russian\"                        = \"European\",\n  \"Polish\"                         = \"European\",\n  \"German\"                         = \"European\",\n  \"English\"                        = \"European\",\n  \"Tapas\"                          = \"European\",\n  \"Portuguese\"                     = \"European\",\n  \"Czech\"                          = \"European\",\n  \"Scandinavian\"                   = \"European\",\n  \"Basque\"                         = \"European\",\n  \"Armenian\"                       = \"European\",\n\n  # --- FRENCH ---\n  \"French\"                         = \"French\",\n  \"New French\"                     = \"French\",\n  \"Haute Cuisine\"                  = \"French\",\n\n  # --- MEDITERRANEAN / MIDDLE EASTERN ---\n  \"Mediterranean\"                  = \"Mediterranean/Middle Eastern\",\n  \"Middle Eastern\"                 = \"Mediterranean/Middle Eastern\",\n  \"Greek\"                          = \"Mediterranean/Middle Eastern\",\n  \"Turkish\"                        = \"Mediterranean/Middle Eastern\",\n  \"Falafel\"                        = \"Mediterranean/Middle Eastern\",\n  \"Egyptian\"                       = \"Mediterranean/Middle Eastern\",\n  \"Moroccan\"                       = \"Mediterranean/Middle Eastern\",\n  \"Lebanese\"                       = \"Mediterranean/Middle Eastern\",\n  \"Iranian\"                        = \"Mediterranean/Middle Eastern\",\n\n  # --- INDIAN ---\n  \"Indian\"                         = \"Indian\",\n\n  # --- OTHER ---\n  \"Other\"                          = \"Other\",\n  \"Fusion\"                         = \"Other\",\n  \"Australian\"                     = \"Other\",\n  \"Polynesian\"                     = \"Other\",\n  \"Not Listed/Not Applicable\"      = \"Other\",\n  \"African\"                        = \"Other\",\n  \"Ethiopian\"                      = \"Other\"\n)\n\n# mapping\nrestaurants &lt;- restaurants %&gt;%\n  mutate(\n    cuisine_group = mapping[CUISINE_DESCRIPTION],\n    cuisine_group = ifelse(is.na(cuisine_group), \"Other\", cuisine_group)\n  )\n\n# check\nrestaurants %&gt;%\n  count(cuisine_group, sort = TRUE)\n\n\n# A tibble: 10 × 2\n   cuisine_group                    n\n   &lt;chr&gt;                        &lt;int&gt;\n 1 American                      7188\n 2 Cafe/Deli/Bakery              5548\n 3 Asian                         4715\n 4 Latin American                3206\n 5 Italian                       2543\n 6 European                      1023\n 7 Other                          970\n 8 Mediterranean/Middle Eastern   780\n 9 Indian                         315\n10 French                         304",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html#geospatial-density-map",
    "href": "results.html#geospatial-density-map",
    "title": "3  Results",
    "section": "3.2 Geospatial Density Map",
    "text": "3.2 Geospatial Density Map\n\n\nCode\n# 1. Load the Shapefile\nnyc_map &lt;- read_sf(\"C:/Users/famig/OneDrive/Scuola/0 Columbia University/1 Fall 2025/STAT GR5702 - Exploratory Data Analysis & Visualization/EDAV/nybb_25d/nybb.shp\") %&gt;%\n  st_transform(crs = 4326)\n\n# 2. Data Cleaning for Geospatial Analysis\n# We create a specific subset to avoid overwriting the main dataset accidentally\nrestaurants_geo &lt;- restaurants %&gt;%\n  # IMPORTANT FIX: Remove rows without coordinates\n  filter(!is.na(Longitude) & !is.na(Latitude)) %&gt;%\n  # Remove valid but incorrect coordinates (e.g., 0,0 points that land in the ocean)\n  filter(Longitude &lt; -70 & Latitude &gt; 35)\n\n# 3. Test Dot Map (Optional - run this first to check if points align with the map)\n# This is lighter to render than the density map\nggplot() +\n  geom_sf(data = nyc_map, fill = \"grey95\", color = \"grey80\") +\n  geom_point(data = restaurants_geo, \n             aes(x = Longitude, y = Latitude), \n             size = 0.1, alpha = 0.1, color = \"red\") +\n  facet_wrap(~ cuisine_group) +\n  theme_void() +\n  labs(title = \"Dot Map Test: Restaurant Locations\")\n\n\n\n\n\n\n\n\n\nCode\n# 4. Final Density Heatmap\n# Note: This creates a Kernel Density Estimation (KDE) over the map\nggplot() +\n  # Base map layer\n  geom_sf(data = nyc_map, fill = \"grey95\", color = \"grey80\", linewidth = 0.3) +\n  \n  # Density layer\n  geom_hdr(data = restaurants_geo, \n           aes(x = Longitude, y = Latitude, fill = after_stat(probs)), \n           method = \"kde\", alpha = 0.6) +\n  \n  # Facet by cuisine to see specific clustering\n  facet_wrap(~ cuisine_group, nrow = 3) + # Increased rows for better visibility\n  \n  # Styling\n  scale_fill_viridis_d(option = \"A\", direction = -1, name = \"Probability\") +\n  theme_void() +\n  labs(title = \"Restaurant Hotspots by Cuisine in NYC\",\n       subtitle = \"Spatial density estimation of inspection locations\",\n       caption = \"Source: NYC DOHMH & NYC Planning\") +\n  theme(strip.text = element_text(face = \"bold\"),\n        legend.position = \"bottom\")\n\n\n\n\n\n\n\n\n\nBy overlaying restaurant coordinates on the NYC borough map using Kernel Density Estimation (KDE), we can visualize the spatial clustering of different culinary traditions. This visualization moves beyond simple counts to reveal distinct cultural enclaves (such as the three major “Chinatowns” in Manhattan, Queens, and Brooklyn) versus cuisines that are uniformly distributed across the city, such as American or Cafe/Deli establishments.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "data.html#restaurant-level-aggregation-and-cuisine-grouping",
    "href": "data.html#restaurant-level-aggregation-and-cuisine-grouping",
    "title": "2  Data",
    "section": "2.4 Restaurant-level aggregation and cuisine grouping",
    "text": "2.4 Restaurant-level aggregation and cuisine grouping\nTo shift our focus from individual inspections to the restaurants themselves, we restructure the dataset. By grouping records under each unique CAMIS identifier, we generate a comprehensive profile for every venue. This allows us to average hygiene scores over time and categorize establishments into broader culinary traditions for clearer visualization.\n\n\nCode\n# ==============================================================================\n# DATA AGGREGATION AT RESTAURANT LEVEL \n# ==============================================================================\n\n# Helper functions to handle NAs safely\nlast_non_null &lt;- function(x) {\n  x &lt;- x[!is.na(x)]\n  if (length(x) == 0) return(NA)\n  tail(x, 1)\n}\n\nsafe_mean &lt;- function(x) {\n  x &lt;- x[!is.na(x)]\n  if (length(x) == 0) return(NA_real_)\n  mean(x)\n}\n\nrestaurants &lt;- df |&gt;\n  # Remove dummy dates (1900) and focus on relevant recent data (post-2015)\n  filter(`INSPECTION DATE` &gt;= ymd(\"2015-01-01\")) |&gt; \n  \n  arrange(`INSPECTION DATE`) |&gt;\n  group_by(CAMIS) |&gt;\n  summarise(\n    DBA      = first(na.omit(DBA)),\n    BORO     = first(na.omit(BORO)),\n    BUILDING = first(BUILDING),\n    STREET   = first(STREET),\n    ZIPCODE  = first(ZIPCODE),\n    PHONE    = first(PHONE),\n    CUISINE_DESCRIPTION = first(`CUISINE DESCRIPTION`),\n    \n    # If the first value is NA, the mean retrieves the location across inspections\n    Latitude  = mean(Latitude, na.rm = TRUE), \n    Longitude = mean(Longitude, na.rm = TRUE),\n\n    n_inspections    = n_distinct(`INSPECTION DATE`, na.rm = TRUE),\n    first_inspection = min(`INSPECTION DATE`, na.rm = TRUE),\n    last_inspection  = max(`INSPECTION DATE`, na.rm = TRUE),\n\n    mean_score = safe_mean(SCORE),\n    # Mean score provides a good summary of overall hygiene performance\n    \n    last_grade = last_non_null(GRADE),\n\n    # Create a list of all unique violations ever received by the restaurant\n    violations = list(unique(na.omit(`VIOLATION DESCRIPTION`))),\n    .groups = \"drop\"\n  )\n\n# ==============================================================================\n# CUISINE CATEGORIZATION MAPPING \n# ==============================================================================\n\nmapping &lt;- c(\n  # --- AMERICAN (Include ora Seafood, Jewish/Kosher e varianti regionali) ---\n  \"American\"                       = \"American\",\n  \"New American\"                   = \"American\",\n  \"Chicken\"                        = \"American\",\n  \"Hamburgers\"                     = \"American\",\n  \"Steakhouse\"                     = \"American\",\n  \"Barbecue\"                       = \"American\",\n  \"Hotdogs\"                        = \"American\",\n  \"Hotdogs/Pretzels\"               = \"American\",\n  \"Soul Food\"                      = \"American\",\n  \"Continental\"                    = \"American\",\n  \"Californian\"                    = \"American\",\n  \"Southwestern\"                   = \"American\",\n  \"Cajun\"                          = \"American\",\n  \"Creole\"                         = \"American\",\n  \"Creole/Cajun\"                   = \"American\",\n  \"Hawaiian\"                       = \"American\",\n  \"Seafood\"                        = \"American\",\n  \"Jewish/Kosher\"                  = \"American\",\n\n  # --- CAFE, DELI, BAKERY & DESSERTS (Include Sandwiches e Salads) ---\n  \"Coffee/Tea\"                     = \"Cafe/Deli/Bakery\",\n  \"Bakery Products/Desserts\"       = \"Cafe/Deli/Bakery\",\n  \"Donuts\"                         = \"Cafe/Deli/Bakery\",\n  \"Frozen Desserts\"                = \"Cafe/Deli/Bakery\",\n  \"Pancakes/Waffles\"               = \"Cafe/Deli/Bakery\",\n  \"Nuts/Confectionary\"             = \"Cafe/Deli/Bakery\",\n  \"Fruits/Vegetables\"              = \"Cafe/Deli/Bakery\",\n  # Spostati qui come richiesto:\n  \"Sandwiches\"                     = \"Cafe/Deli/Bakery\",\n  \"Sandwiches/Salads/Mixed Buffet\" = \"Cafe/Deli/Bakery\",\n  \"Salads\"                         = \"Cafe/Deli/Bakery\",\n  \"Soups/Salads/Sandwiches\"        = \"Cafe/Deli/Bakery\",\n  \"Soups\"                          = \"Cafe/Deli/Bakery\",\n  \"Juice, Smoothies, Fruit Salads\" = \"Cafe/Deli/Bakery\",\n  \"Bagels/Pretzels\"                = \"Cafe/Deli/Bakery\",\n  \"Bottled Beverages\"              = \"Cafe/Deli/Bakery\",\n\n  # --- ASIAN ---\n  \"Chinese\"                        = \"Asian\",\n  \"Japanese\"                       = \"Asian\",\n  \"Asian/Asian Fusion\"             = \"Asian\",\n  \"Korean\"                         = \"Asian\",\n  \"Thai\"                           = \"Asian\",\n  \"Southeast Asian\"                = \"Asian\",\n  \"Bangladeshi\"                    = \"Asian\",\n  \"Filipino\"                       = \"Asian\",\n  \"Pakistani\"                      = \"Asian\",\n  \"Chinese/Japanese\"               = \"Asian\",\n  \"Chinese/Cuban\"                  = \"Asian\",\n  \"Indonesian\"                     = \"Asian\",\n  \"Afghan\"                         = \"Asian\",\n  \n  # --- LATIN AMERICAN ---\n  \"Mexican\"                        = \"Latin American\",\n  \"Latin American\"                 = \"Latin American\",\n  \"Caribbean\"                      = \"Latin American\",\n  \"Tex-Mex\"                        = \"Latin American\",\n  \"Peruvian\"                       = \"Latin American\",\n  \"Brazilian\"                      = \"Latin American\",\n  \"Chilean\"                        = \"Latin American\",\n  \"Chimichurri\"                    = \"Latin American\",\n  \n  # --- ITALIAN (Include Pizza) ---\n  \"Pizza\"                          = \"Italian\",\n  \"Italian\"                        = \"Italian\",\n  \n  # --- EUROPEAN (Spagnola, Est Europa, ecc.) ---\n  \"Spanish\"                        = \"European\",\n  \"Irish\"                          = \"European\",\n  \"Eastern European\"               = \"European\",\n  \"Russian\"                        = \"European\",\n  \"Polish\"                         = \"European\",\n  \"German\"                         = \"European\",\n  \"English\"                        = \"European\",\n  \"Tapas\"                          = \"European\",\n  \"Portuguese\"                     = \"European\",\n  \"Czech\"                          = \"European\",\n  \"Scandinavian\"                   = \"European\",\n  \"Basque\"                         = \"European\",\n  \"Armenian\"                       = \"European\",\n\n  # --- FRENCH ---\n  \"French\"                         = \"French\",\n  \"New French\"                     = \"French\",\n  \"Haute Cuisine\"                  = \"French\",\n\n  # --- MEDITERRANEAN / MIDDLE EASTERN ---\n  \"Mediterranean\"                  = \"Mediterranean/Middle Eastern\",\n  \"Middle Eastern\"                 = \"Mediterranean/Middle Eastern\",\n  \"Greek\"                          = \"Mediterranean/Middle Eastern\",\n  \"Turkish\"                        = \"Mediterranean/Middle Eastern\",\n  \"Falafel\"                        = \"Mediterranean/Middle Eastern\",\n  \"Egyptian\"                       = \"Mediterranean/Middle Eastern\",\n  \"Moroccan\"                       = \"Mediterranean/Middle Eastern\",\n  \"Lebanese\"                       = \"Mediterranean/Middle Eastern\",\n  \"Iranian\"                        = \"Mediterranean/Middle Eastern\",\n\n  # --- INDIAN ---\n  \"Indian\"                         = \"Indian\",\n\n  # --- OTHER ---\n  \"Other\"                          = \"Other\",\n  \"Fusion\"                         = \"Other\",\n  \"Australian\"                     = \"Other\",\n  \"Polynesian\"                     = \"Other\",\n  \"Not Listed/Not Applicable\"      = \"Other\",\n  \"African\"                        = \"Other\",\n  \"Ethiopian\"                      = \"Other\"\n)\n\n# mapping\nrestaurants &lt;- restaurants |&gt;\n  mutate(\n    cuisine_group = mapping[CUISINE_DESCRIPTION],\n    cuisine_group = ifelse(is.na(cuisine_group), \"Other\", cuisine_group)\n  )\n\n\n\n2.4.0.1 Yelp open data set**\nThe Yelp dataset contains no missing values or duplicates, as incomplete records were filtered out during the data extraction process. And we joined Yelp’s dataset containing rating score,review counts, and open/close status with DOHMN dataset using unique phone numbers of the restaurants rather than address or name because it could be inconsistent or duplicated.\n\n\nCode\n# # 1. Load the Yelp dataset\n# yelp_df &lt;- read_csv(\"/Users/dian/restaurants-in-nyc/nyc_yelp_matches_FINAL.csv\", \n#                     col_types = cols(\n#                       query_phone = col_character(), \n#                       .default = col_guess()\n#                     ))\n# \n# # 2. Prepare the Yelp data for joining\n# yelp_clean &lt;- yelp_df |&gt;\n#   mutate(\n#     phone_match_key = str_sub(as.character(query_phone), -10)\n#   ) |&gt;\n#   distinct(phone_match_key, .keep_all = TRUE) |&gt;\n#   select(-matches(\"url\")) # &lt;--- REMOVES any column containing \"url\"\n# \n# # 3. Prepare the DOHMH (restaurants) data for joining\n# restaurants_clean &lt;- restaurants |&gt;\n#   mutate(\n#     phone_match_key = str_sub(str_remove_all(as.character(PHONE), \"[^0-9]\"), -10)\n#   )\n# \n# # 4. Join the datasets\n# # Only join the restaurants with yelp data available\n# final_data &lt;- restaurants_clean |&gt;\n#   inner_join(yelp_clean, by = \"phone_match_key\")",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "conclusion.html",
    "href": "conclusion.html",
    "title": "4  Conclusion",
    "section": "",
    "text": "hellooooooo",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Conclusion</span>"
    ]
  },
  {
    "objectID": "data.html#description",
    "href": "data.html#description",
    "title": "2  Data",
    "section": "2.2 Description",
    "text": "2.2 Description\nWe have curated and merged 2 data sets for this project: 1. “DOHMH New York City Restaurant Inspection Results” maintained by the NYC Department of Health and Mental Hygiene (DOHMH), serves as the official record of food safety compliance for restaurants and college cafeterias in New York City. 2. “Yelp Open Dataset” is maintained by Yelp and contains information about public ratings, reviews, and the current state of the restaurant (closed/open).\n\n2.2.0.1 Dataset Overview\n1. DOHMH New York City Restaurant Inspection Results - Source: NYC Department of Health and Mental Hygiene (DOHMH) https://data.cityofnewyork.us/Health/DOHMH-New-York-City-Restaurant-Inspection-Results/43nn-pn8j/about_data.\n\nScope: The dataset contains details on every sustained or initially cited violation from inspections conducted at active restaurants.\nUpdate Frequency: The data on NYC Open Data is updated daily, meaning it reflects near real-time inspection activities, and we obtained the dataset on 10/30/2025.\n\nKey Variables: - CAMIS (Record ID): This is a unique 10-digit integer identifier for each restaurant for the DOHMH dataset.\n\nSCORE: The total deficiency points calculated at the end of an inspection. Points are added for every violation found, thus a score of 0 is perfect, while a higher score means worse condition.\nGRADE: The letter grade derived from the score.\nA: 0 to 13 points. B: 14 to 27 points. C: 28 or more points. Some are graded as ‘P’ (Pending) or ‘N’ (Not yet graded).\nVIOLATIONS: This field describes the specific health code infractions.\nfirst_inspectionand last_inspection: Indicates the time period of inspections done on each restaurant.\n\n2. Yelp open data set - Source: Yelp Fusion API (Business Search Endpoint). - Scope: This dataset provides business-level metadata and aggregate public sentiment metrics for New York City restaurants that correspond to the facilities listed in the DOHMH dataset. - Methodology: Data was retrieved by querying the Yelp API using unique phone numbers extracted from the non-repeated DOHMH restaurant list. - Integration: This dataset is designed to be joined with the DOHMH inspection records using the phone number as the common key.\nKey Variables: - query_phone (Join Key): The phone number used to query the API. This serves as the primary foreign key to link this sentiment data back to the specific restaurant records in the DOHMH dataset.\n\nyelp_rating: The aggregate star rating of the restaurant on a scale of 1 to 5. This serves as the primary quantitative proxy for “public sentiment” in the correlation analysis.\nreview_count: The total number of reviews contributing to the rating. This variable helps weight the significance of the yelp_rating (e.g., distinguishing between a 5-star rating with 2 reviews vs. 200 reviews).\nis_closed: A boolean value (True/False) indicating if the business has been marked as permanently closed on Yelp. This is crucial for filtering out inactive businesses from the final analysis.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  }
]